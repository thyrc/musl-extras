diff --git a/src/librustc_codegen_ssa/back/link.rs b/src/librustc_codegen_ssa/back/link.rs
index dcce1d452..7cf8e8482 100644
--- a/src/librustc_codegen_ssa/back/link.rs
+++ b/src/librustc_codegen_ssa/back/link.rs
@@ -1964,8 +1964,8 @@ fn add_upstream_rust_crates<'a, B: ArchiveBuilder<'a>>(
     }
 }
 
-// Link in all of our upstream crates' native dependencies. Remember that
-// all of these upstream native dependencies are all non-static
+// Link in all of our upstream crates' native dependencies. Remember that when
+// linking libraries, these upstream native dependencies are all non-static
 // dependencies. We've got two cases then:
 //
 // 1. The upstream crate is an rlib. In this case we *must* link in the
@@ -2015,7 +2015,15 @@ fn add_upstream_native_libraries(
                 continue;
             }
             match lib.kind {
-                NativeLibKind::Dylib | NativeLibKind::Unspecified => cmd.link_dylib(name),
+                NativeLibKind::Unspecified => {
+                    // When creating executables, match library linkage to that of the executable
+                    if crate_type == config::CrateType::Executable && sess.crt_static(Some(crate_type)) {
+                        cmd.link_staticlib(name)
+                    } else {
+                        cmd.link_dylib(name)
+                    }
+                },
+                NativeLibKind::Dylib => cmd.link_dylib(name),
                 NativeLibKind::Framework => cmd.link_framework(name),
                 NativeLibKind::StaticNoBundle => {
                     // Link "static-nobundle" native libs only if the crate they originate from
